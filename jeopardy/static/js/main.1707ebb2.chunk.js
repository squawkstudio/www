(this.webpackJsonpRLJeopardy=this.webpackJsonpRLJeopardy||[]).push([[0],{154:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(22),o=a.n(c),s=(a(90),a(91),a(92),a(16)),l=a(17),i=a(19),u=a(18),p=a(20),d=a(71),m=a(56),f=a(164),h=a(165),g=a(166),v=function(e){var t=e.msg;return n.a.createElement("div",{className:"col-12"},n.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),n.a.createElement("p",null,"Loading ",t,". . ."))},y=a(24),O=a(9),b=a(160),E=a(161),j=a(162),D=a(163),w=a(80),N=a(68),A=a.n(N);a(141),a(142);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).startDateChanged=function(e){e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0)),a.setState({searchEnabled:!0,startDate:e})},a.endDateChanged=function(e){e&&(e.setHours(23),e.setMinutes(59),e.setSeconds(59)),a.setState({searchEnabled:!0,endDate:e})},a.searchClicked=function(){a.props.fetchQAs(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,{offset:0}))},a.catToggled=a.catToggled.bind(Object(O.a)(a)),a.valToggled=a.valToggled.bind(Object(O.a)(a)),a.catSelected=a.catSelected.bind(Object(O.a)(a)),a.valSelected=a.valSelected.bind(Object(O.a)(a)),a.startDateChanged=a.startDateChanged.bind(Object(O.a)(a)),a.endDateChanged=a.endDateChanged.bind(Object(O.a)(a)),a.searchClicked=a.searchClicked.bind(Object(O.a)(a)),a.state={catDropdownOpen:!1,valDropdownOpen:!1,searchEnabled:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"catToggled",value:function(){this.setState((function(e){return{catDropdownOpen:!e.catDropdownOpen}}))}},{key:"valToggled",value:function(){this.setState((function(e){return{valDropdownOpen:!e.valDropdownOpen}}))}},{key:"getText",value:function(e){var t=e.currentTarget.innerText;return"Clear"===t?null:t}},{key:"catSelected",value:function(e,t){this.setState({searchEnabled:!0,catId:this.catTitle2IdMap.get(this.getText(e)),catTitle:this.getText(e)})}},{key:"valSelected",value:function(e){this.setState({searchEnabled:!0,value:this.getText(e)&&parseInt(this.getText(e),10)||null})}},{key:"render",value:function(){var e=this,t=this.props.appProps,a=t.data.filter((function(e){return(!t.category||t.category===e.category.id)&&(!t.value||t.value===e.value)&&(!t.startDate||e.airdate>=t.startDate)&&(!t.endDate||e.airdate<=t.endDate)}));this.catTitle2IdMap=new Map(a.map((function(e){return[e.category.title,e.category.id]})));var r=Array.from(this.catTitle2IdMap.entries()).sort((function(e,t){return e[0]>t[0]?1:-1})).map((function(t){return n.a.createElement(b.a,{key:t[0],onClick:e.catSelected},t[0])})),c=[100,200,400,800,1e3].map((function(t){return n.a.createElement(b.a,{key:t,onClick:e.valSelected},t)}));return console.log("filterBar render:",this.state),n.a.createElement("div",{className:"filterBar row"},n.a.createElement(E.a,{isOpen:this.state.catDropdownOpen,toggle:this.catToggled},n.a.createElement(j.a,{className:"filterBtn",caret:!0,color:"primary"}," Category ",this.state.catTitle),n.a.createElement(D.a,null,n.a.createElement(b.a,{key:"clear",onClick:this.catSelected},"Clear"),n.a.createElement(b.a,{divider:!0}),r)),n.a.createElement(E.a,{isOpen:this.state.valDropdownOpen,toggle:this.valToggled},n.a.createElement(j.a,{className:"filterBtn",caret:!0,color:"primary"}," Value ",this.state.value||""),n.a.createElement(D.a,null,n.a.createElement(b.a,{key:"clear",onClick:this.valSelected},"Clear"),n.a.createElement(b.a,{divider:!0}),c)),n.a.createElement("div",{className:"dateRangePicker"},n.a.createElement(A.a,{className:"filterBtn startDatePicker",popperPlacement:"top",placeholderText:"Start air date",maxDate:this.state.endDate?this.state.endDate:new Date,isClearable:!0,selected:this.state.startDate,onChange:this.startDateChanged}),n.a.createElement(A.a,{className:"filterBtn endDatePicker",popperPlacement:"top",placeholderText:"End air date",minDate:this.state.startDate?this.state.startDate:null,maxDate:new Date,isClearable:!0,selected:this.state.endDate,onChange:this.endDateChanged})),n.a.createElement(w.a,{className:"filterBtn searchBtn",color:"primary",disabled:!this.state.searchEnabled,onClick:this.searchClicked},"Search"),n.a.createElement("div",{className:"cardTotal"},a.length," Question"))}}]),t}(n.a.Component);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).clicked=a.clicked.bind(Object(O.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"clicked",value:function(e){e.preventDefault();var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.appProps);t.offset=t.offset?t.offset+100:100,this.props.fetchQAs(t)}},{key:"render",value:function(){return n.a.createElement(w.a,{className:"moreButton",onClick:this.clicked,disabled:this.props.appProps.isLoading},this.props.appProps.isLoading?"Loading...":"More...")}}]),t}(n.a.Component),T=a(38),Q=a.n(T),L=function(e){var t=e.getFullYear();return(1+e.getMonth()).toString().padStart(2,"0")+"/"+e.getDate().toString().padStart(2,"0")+"/"+t},M=function(e){var t=e.qa,a=Object(r.useState)(!1),c=Object(m.a)(a,2),o=c[0],s=c[1];return n.a.createElement(Q.a,{isOpen:o,onClickOutside:function(){s(!1)},content:function(e){var a=e.position,r=e.targetRect,c=e.popoverRect;return n.a.createElement(T.ArrowContainer,{position:a,targetRect:r,popoverRect:c,arrowColor:"white",arrowSize:10,arrowStyle:{opacity:.7}},n.a.createElement("dl",{className:"detailPopover row "},n.a.createElement("dt",{className:"col-3"},"Answer:"),n.a.createElement("dd",{className:"col-9"},n.a.createElement("b",null,t.answer)),n.a.createElement("dt",{className:"col-3"},"Value:"),n.a.createElement("dd",{className:"col-9"},n.a.createElement("b",null,t.value)),n.a.createElement("dt",{className:"col-3"},"Aired:"),n.a.createElement("dd",{className:"col-9"},n.a.createElement("b",null,L(t.airdate)))))}},n.a.createElement(f.a,{className:"questionCard",onClick:function(){s(!o)}},n.a.createElement(h.a,{className:"questionCategory"},t.category.title),n.a.createElement(g.a,{className:"question"},t.question)))},_=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e)),console.count("Search constructor"),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.appProps.qas;if(e.isLoading&&!e.data)return n.a.createElement("div",{className:"row"},n.a.createElement(v,null)," ");if(e.errMess)return n.a.createElement("div",{className:"col-12"}," ",n.a.createElement("h4",null,e.errMess)," ");var t=e.category,a=e.value,r=e.startDate,c=e.endDate,o=e.data.filter((function(e){return(!t||t===e.category.id)&&(!a||a===e.value)})),s=o.filter((function(e){return(!r||e.airdate>=r)&&(!c||e.airdate<=c)})),l=s.map((function(e){return n.a.createElement("div",{className:"questionTile col-lg-3 col-md-6 col-12",key:e.id},n.a.createElement(M,{qa:e}))}));return console.log("search render: ",r,c,o.length,s.length),n.a.createElement("div",{className:"questionBoard"},n.a.createElement(C,{fetchQAs:this.props.appProps.fetchQAs,appProps:e,minDate:new Date(Math.min.apply(Math,Object(d.a)(o.map((function(e){return e.airdate}))))),maxDate:new Date(Math.max.apply(Math,Object(d.a)(o.map((function(e){return e.airdate})))))}),n.a.createElement("div",{className:"row"},l),n.a.createElement("div",{className:"row"},n.a.createElement(S,{fetchQAs:this.props.appProps.fetchQAs,appProps:e})))}}]),t}(n.a.Component),x=function(e){var t=e.qa,a=Object(r.useState)(!1),c=Object(m.a)(a,2),o=c[0],s=c[1];return n.a.createElement(Q.a,{isOpen:o,onClickOutside:function(){s(!1)},content:function(e){var a=e.position,r=e.targetRect,c=e.popoverRect;return n.a.createElement(T.ArrowContainer,{position:a,targetRect:r,popoverRect:c,arrowColor:"white",arrowSize:10,arrowStyle:{opacity:.7}},n.a.createElement("dl",{className:"detailPopover row "},n.a.createElement("dt",{className:"col-1"},"Q:"),n.a.createElement("dd",{className:"col-10"},n.a.createElement("b",null,t.question)),n.a.createElement("dt",{className:"col-1"},"A:"),n.a.createElement("dd",{className:"col-10"},n.a.createElement("b",null,t.answer))))}},n.a.createElement(f.a,{className:"playCard",onClick:function(){s(!o)}},n.a.createElement(g.a,{className:"playValue"},"$",t.value)))},q=function(e){return e.cats.map((function(e){return n.a.createElement("div",{className:"playTile col-2",key:e.id},n.a.createElement(f.a,{className:"playCard"},n.a.createElement(g.a,{className:"playCategory"},e.title)))}))},I=function(e){var t=e.appProps;if(t.cats.isLoading)return n.a.createElement("div",{className:"row"}," ",n.a.createElement(v,{msg:"Categories"})," ");if(t.catQAs.isLoading)return n.a.createElement("div",{className:"row"}," ",n.a.createElement(v,{msg:"Categories Questions"})," ");if(t.cats.errMess)return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h4",null,t.qas.errMess)));for(var a=[],r=0;r<5;r++)for(var c=0;c<6;c++){var o=t.cats.cats[c].id;if(t.catQAs){var s=t.catQAs.catQAs["c"+o];if(s&&s[r]){for(var l=200*(r+1),i=0;i<s.length&&s[i].value!==l;)i++;i<s.length&&a.push(n.a.createElement("div",{className:"playTile col-2",key:"c"+c+"r"+r},n.a.createElement(x,{qa:s[i]})))}}}return n.a.createElement("div",{className:"playBoard"},n.a.createElement("div",{className:"categoryBar row"},n.a.createElement(q,{cats:t.cats.cats})),n.a.createElement("div",{className:"row"},a))},B=a(167),R=a(168),F=a(169),G=a(170),J=a(171),V=a(172),z=a(34),H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggleNav=a.toggleNav.bind(Object(O.a)(a)),a.state={isNavOpen:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"render",value:function(){return n.a.createElement(B.a,{dark:!0,expand:"md"},n.a.createElement(R.a,{onClick:this.toggleNav}),n.a.createElement(F.a,{className:"mr-auto",href:"/jeopardy/"},n.a.createElement("img",{className:"logo",src:"assets/images/logo.png",alt:"Jeopardy!"})),n.a.createElement(G.a,{isOpen:this.state.isNavOpen,navbar:!0},n.a.createElement(J.a,{navbar:!0},n.a.createElement(V.a,null,n.a.createElement(z.b,{className:"nav-link",to:"/search"},n.a.createElement("span",{className:"fa fa-search fa-lg"})," Search")),n.a.createElement(V.a,null,n.a.createElement(z.b,{className:"nav-link",to:"/play"},n.a.createElement("span",{className:"fa fa-gamepad fa-lg"})," Play")))))}}]),t}(r.Component);var W=function(e){return n.a.createElement("div",{className:"footer"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-auto"},n.a.createElement("p",null,"Developed by Rachel Lu"))))},$=a(29),Y=a(54),K="https://jservice.io/";function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=function(e){return function(t){return fetch(K+"api/clues?category="+e).then((function(e){if(e.ok)return e;var t=new Error("Fetching categories question error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(a){return t(ce(e,a))})).catch((function(e){return t(te(e.message))}))}},ee=function(e){return{type:"QAS_LOADING",payload:e}},te=function(e){return{type:"QAS_FAILED",payload:e}},ae=function(e,t){return{type:"QAS_ADD",payload:X({},e,{qas:t})}},re=function(e){return{type:"CAT_LOADING",payload:e}},ne=function(e){return{type:"CAT_ADD",payload:e}},ce=function(e,t){return{type:"CAT_QAS_ADD",catId:e,payload:t}},oe=a(174),se=a(173),le=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchQAs(0),this.props.fetchCats()}},{key:"render",value:function(){var e=this;return console.log("main render: ",this.props.location),n.a.createElement("div",null,n.a.createElement(H,null),n.a.createElement(oe.a,null,n.a.createElement(se.a,{key:this.props.location.key,classNames:"page",timeout:300},n.a.createElement($.d,{location:this.props.location},n.a.createElement($.b,{exact:!0,path:"/search",render:function(){return n.a.createElement(_,{appProps:e.props})}}),n.a.createElement($.b,{exact:!0,path:"/play",render:function(){return n.a.createElement(I,{appProps:e.props})}}),n.a.createElement($.a,{to:"/search"})))),n.a.createElement(W,null))}}]),t}(r.Component),ie=Object($.g)(Object(Y.b)((function(e){return{qas:e.qas,cats:e.cats,catQAs:e.catQAs}}),(function(e){return{fetchQAs:function(t){return e(function(e){return function(t){t(ee(!0));var a=K+"api/clues?offset="+(e&&e.offset||0)+(e.catId?"&category="+e.catId:"")+(e.value?"&value="+e.value:"")+(e.startDate&&e.endDate?"&min_date="+L(e.startDate)+"&max_date="+L(e.endDate):(e.startDate?"&max_date="+L(e.startDate):"")+(e.endDate?"&min_date="+L(e.endDate):""));return console.log("fetchQAs from ",K,":",a),fetch(a).then((function(e){if(e.ok)return e;var t=new Error("Fetching questions error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return""!==e.question&&e.value}))})).then((function(a){return t(ae(e,a))})).catch((function(e){return t(te(e.message))}))}}(t))},fetchCats:function(){return e((function(e){e(re(!0));var a=1e3*Math.random();return fetch(K+"api/categories?offset="+a+"&count="+(t||100)).then((function(e){if(e.ok)return e;var t=new Error("Fetching categories error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){var a=t.sort((function(e,t){return e.clues_count<t.clues_count?1:-1})).slice(0,6);return a.map((function(t){return e(Z(t.id))})),e(ne(a))})).catch((function(t){return e(te(t.message))}))}));var t}}}))(le)),ue=(a(154),a(39));function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QAS_LOADING":return de({},e,{isLoading:t.payload,errMess:null});case"QAS_FAILED":return de({},e,{isLoading:!1,errMess:t.payload});case"QAS_ADD":var a=t.payload.offset>0&&e.data?e.data:[],r=t.payload.qas.map((function(e){return de({},e,{airdate:new Date(e.airdate)})}));return t.payload.qas=null,de({},e,{isLoading:!1,errMess:null},t.payload,{data:a.concat(r)});default:return e}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,cats:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAT_LOADING":return de({},e,{isLoading:t.payload,errMess:null});case"CAT_FAILED":return de({},e,{isLoading:!1,errMess:t.payload});case"CAT_ADD":return de({},e,{isLoading:!1,errMess:null,cats:t.payload});default:return e}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,catQAs:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAT_QAS_LOADING":return de({},e,{isLoading:t.payload,errMess:null});case"CAT_QAS_FAILED":return de({},e,{isLoading:!1,errMess:t.payload});case"CAT_QAS_ADD":var a=e.catQAs;return a["c"+t.catId]=t.payload.filter((function(e){return e.value>0})).sort((function(e,t){return e.value>t.value?1:-1})).map((function(e){return de({},e,{airdate:new Date(e.airdate)})})),de({},e,{isLoading:!1,errMess:null,catQAs:a});default:return e}},ge=a(82),ve=a(83),ye=a.n(ve),Oe=Object(ue.d)(Object(ue.c)({qas:me,cats:fe,catQAs:he}),Object(ue.a)(ge.a,ye.a)),be=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(Y.a,{store:Oe},n.a.createElement(z.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(ie,null))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,a){e.exports=a(155)},91:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.1707ebb2.chunk.js.map