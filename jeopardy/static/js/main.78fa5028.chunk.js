(this.webpackJsonpRLJeopardy=this.webpackJsonpRLJeopardy||[]).push([[0],{100:function(e,t,a){e.exports=a(179)},106:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),l=(a(105),a(106),a(107),a(18)),o=a(19),i=a(21),u=a(20),d=a(77),p=a(58),m=a(188),f=a(189),h=a(190),v=function(e){var t=e.msg;return r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",null,"Loading ",t,". . ."))},g=a(8),E=a(16),b=a(184),O=a(185),y=a(186),j=a(187),D=a(93),N=a(73),w=a.n(N),A=(a(108),a(109),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).startDateChanged=function(e){e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0)),n.setState({searchEnabled:!0,startDate:e})},n.endDateChanged=function(e){e&&(e.setHours(23),e.setMinutes(59),e.setSeconds(59)),n.setState({searchEnabled:!0,endDate:e})},n.searchClicked=function(){n.props.fetchQAs(Object(g.a)(Object(g.a)({},n.state),{},{offset:0}))},n.catToggled=n.catToggled.bind(Object(E.a)(n)),n.valToggled=n.valToggled.bind(Object(E.a)(n)),n.catSelected=n.catSelected.bind(Object(E.a)(n)),n.valSelected=n.valSelected.bind(Object(E.a)(n)),n.startDateChanged=n.startDateChanged.bind(Object(E.a)(n)),n.endDateChanged=n.endDateChanged.bind(Object(E.a)(n)),n.searchClicked=n.searchClicked.bind(Object(E.a)(n)),n.state={catDropdownOpen:!1,valDropdownOpen:!1,searchEnabled:!1},n}return Object(o.a)(a,[{key:"catToggled",value:function(){this.setState((function(e){return{catDropdownOpen:!e.catDropdownOpen}}))}},{key:"valToggled",value:function(){this.setState((function(e){return{valDropdownOpen:!e.valDropdownOpen}}))}},{key:"getText",value:function(e){var t=e.currentTarget.innerText;return"Clear"===t?null:t}},{key:"catSelected",value:function(e,t){this.setState({searchEnabled:!0,catId:this.catTitle2IdMap.get(this.getText(e)),catTitle:this.getText(e)})}},{key:"valSelected",value:function(e){this.setState({searchEnabled:!0,value:this.getText(e)&&parseInt(this.getText(e),10)||null})}},{key:"render",value:function(){var e=this,t=this.props.appProps,a=t.data.filter((function(e){return(!t.category||t.category===e.category.id)&&(!t.value||t.value===e.value)&&(!t.startDate||e.airdate>=t.startDate)&&(!t.endDate||e.airdate<=t.endDate)}));this.catTitle2IdMap=new Map(a.map((function(e){return[e.category.title,e.category.id]})));var n=Array.from(this.catTitle2IdMap.entries()).sort((function(e,t){return e[0]>t[0]?1:-1})).map((function(t){return r.a.createElement(b.a,{key:t[0],onClick:e.catSelected},t[0])})),c=[100,200,400,800,1e3].map((function(t){return r.a.createElement(b.a,{key:t,onClick:e.valSelected},t)}));return console.log("filterBar render:",this.state),r.a.createElement("div",{className:"filterBar row"},r.a.createElement(O.a,{isOpen:this.state.catDropdownOpen,toggle:this.catToggled},r.a.createElement(y.a,{className:"filterBtn",caret:!0,color:"primary"}," Category ",this.state.catTitle),r.a.createElement(j.a,null,r.a.createElement(b.a,{key:"clear",onClick:this.catSelected},"Clear"),r.a.createElement(b.a,{divider:!0}),n)),r.a.createElement(O.a,{isOpen:this.state.valDropdownOpen,toggle:this.valToggled},r.a.createElement(y.a,{className:"filterBtn",caret:!0,color:"primary"}," Value ",this.state.value||""),r.a.createElement(j.a,null,r.a.createElement(b.a,{key:"clear",onClick:this.valSelected},"Clear"),r.a.createElement(b.a,{divider:!0}),c)),r.a.createElement("div",{className:"dateRangePicker"},r.a.createElement(w.a,{className:"filterBtn startDatePicker",popperPlacement:"top",placeholderText:"Start air date",maxDate:this.state.endDate?this.state.endDate:new Date,isClearable:!0,selected:this.state.startDate,onChange:this.startDateChanged}),r.a.createElement(w.a,{className:"filterBtn endDatePicker",popperPlacement:"top",placeholderText:"End air date",minDate:this.state.startDate?this.state.startDate:null,maxDate:new Date,isClearable:!0,selected:this.state.endDate,onChange:this.endDateChanged})),r.a.createElement(D.a,{className:"filterBtn searchBtn",color:"primary",disabled:!this.state.searchEnabled,onClick:this.searchClicked},"Search"),r.a.createElement("div",{className:"cardTotal"},a.length," Question"))}}]),a}(r.a.Component)),C=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).clicked=n.clicked.bind(Object(E.a)(n)),n}return Object(o.a)(a,[{key:"clicked",value:function(e){e.preventDefault();var t=Object(g.a)({},this.props.appProps);t.offset=t.offset?t.offset+100:100,this.props.fetchQAs(t)}},{key:"render",value:function(){return r.a.createElement(D.a,{className:"moreButton",onClick:this.clicked,disabled:this.props.appProps.isLoading},this.props.appProps.isLoading?"Loading...":"More...")}}]),a}(r.a.Component),k=a(38),S=a.n(k),T=function(e){var t=e.getFullYear();return(1+e.getMonth()).toString().padStart(2,"0")+"/"+e.getDate().toString().padStart(2,"0")+"/"+t},Q=function(e){var t=e.qa,a=Object(n.useState)(!1),c=Object(p.a)(a,2),s=c[0],l=c[1];return r.a.createElement(S.a,{isOpen:s,onClickOutside:function(){l(!1)},content:function(e){var a=e.position,n=e.targetRect,c=e.popoverRect;return r.a.createElement(k.ArrowContainer,{position:a,targetRect:n,popoverRect:c,arrowColor:"white",arrowSize:10,arrowStyle:{opacity:.7}},r.a.createElement("dl",{className:"detailPopover row "},r.a.createElement("dt",{className:"col-3"},"Answer:"),r.a.createElement("dd",{className:"col-9"},r.a.createElement("b",null,t.answer)),r.a.createElement("dt",{className:"col-3"},"Value:"),r.a.createElement("dd",{className:"col-9"},r.a.createElement("b",null,t.value)),r.a.createElement("dt",{className:"col-3"},"Aired:"),r.a.createElement("dd",{className:"col-9"},r.a.createElement("b",null,T(t.airdate)))))}},r.a.createElement(m.a,{className:"questionCard",onClick:function(){l(!s)}},r.a.createElement(f.a,{className:"questionCategory"},t.category.title),r.a.createElement(h.a,{className:"question"},t.question)))},L=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),console.count("Search constructor"),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.appProps.qas;if(e.isLoading&&!e.data)return r.a.createElement("div",{className:"row"},r.a.createElement(v,null)," ");if(e.errMess)return r.a.createElement("div",{className:"col-12"}," ",r.a.createElement("h4",null,e.errMess)," ");var t=e.category,a=e.value,n=e.startDate,c=e.endDate,s=e.data.filter((function(e){return(!t||t===e.category.id)&&(!a||a===e.value)})),l=s.filter((function(e){return(!n||e.airdate>=n)&&(!c||e.airdate<=c)})),o=l.map((function(e){return r.a.createElement("div",{className:"questionTile col-lg-3 col-md-6 col-12",key:e.id},r.a.createElement(Q,{qa:e}))}));return console.log("search render: ",n,c,s.length,l.length),r.a.createElement("div",{className:"questionBoard"},r.a.createElement(A,{fetchQAs:this.props.appProps.fetchQAs,appProps:e,minDate:new Date(Math.min.apply(Math,Object(d.a)(s.map((function(e){return e.airdate}))))),maxDate:new Date(Math.max.apply(Math,Object(d.a)(s.map((function(e){return e.airdate})))))}),r.a.createElement("div",{className:"row"},o),r.a.createElement("div",{className:"row"},r.a.createElement(C,{fetchQAs:this.props.appProps.fetchQAs,appProps:e})))}}]),a}(r.a.Component),M=function(e){var t=e.qa,a=Object(n.useState)(!1),c=Object(p.a)(a,2),s=c[0],l=c[1];return r.a.createElement(S.a,{isOpen:s,onClickOutside:function(){l(!1)},content:function(e){var a=e.position,n=e.targetRect,c=e.popoverRect;return r.a.createElement(k.ArrowContainer,{position:a,targetRect:n,popoverRect:c,arrowColor:"white",arrowSize:10,arrowStyle:{opacity:.7}},r.a.createElement("dl",{className:"detailPopover row "},r.a.createElement("dt",{className:"col-1"},"Q:"),r.a.createElement("dd",{className:"col-10"},r.a.createElement("b",null,t.question)),r.a.createElement("dt",{className:"col-1"},"A:"),r.a.createElement("dd",{className:"col-10"},r.a.createElement("b",null,t.answer))))}},r.a.createElement(m.a,{className:"playCard",onClick:function(){l(!s)}},r.a.createElement(h.a,{className:"playValue"},"$",t.value)))},_=function(e){return e.cats.map((function(e){return r.a.createElement("div",{className:"playTile col-2",key:e.id},r.a.createElement(m.a,{className:"playCard"},r.a.createElement(h.a,{className:"playCategory"},e.title)))}))},x=function(e){var t=e.appProps;if(t.cats.isLoading)return r.a.createElement("div",{className:"row"}," ",r.a.createElement(v,{msg:"Categories"})," ");if(t.catQAs.isLoading)return r.a.createElement("div",{className:"row"}," ",r.a.createElement(v,{msg:"Categories Questions"})," ");if(t.cats.errMess)return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",null,t.qas.errMess)));for(var a=[],n=0;n<5;n++)for(var c=0;c<6;c++){var s=t.cats.cats[c].id;if(t.catQAs){var l=t.catQAs.catQAs["c"+s];if(l&&l[n]){for(var o=200*(n+1),i=0;i<l.length&&l[i].value!==o;)i++;i<l.length&&a.push(r.a.createElement("div",{className:"playTile col-2",key:"c"+c+"r"+n},r.a.createElement(M,{qa:l[i]})))}}}return r.a.createElement("div",{className:"playBoard"},r.a.createElement("div",{className:"categoryBar row"},r.a.createElement(_,{cats:t.cats.cats})),r.a.createElement("div",{className:"row"},a))},q=a(191),P=a(192),I=a(193),B=a(194),R=a(195),F=a(196),G=a(37),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).toggleNav=n.toggleNav.bind(Object(E.a)(n)),n.state={isNavOpen:!1},n}return Object(o.a)(a,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"render",value:function(){return r.a.createElement(q.a,{dark:!0,expand:"md"},r.a.createElement(P.a,{onClick:this.toggleNav}),r.a.createElement(I.a,{className:"mr-auto",href:"/jeopardy/"},r.a.createElement("img",{className:"logo",src:"/assets/images/logo.png",alt:"Jeopardy!"})),r.a.createElement(B.a,{isOpen:this.state.isNavOpen,navbar:!0},r.a.createElement(R.a,{navbar:!0},r.a.createElement(F.a,null,r.a.createElement(G.b,{className:"nav-link",to:"/search"},r.a.createElement("span",{className:"fa fa-search fa-lg"})," Search")),r.a.createElement(F.a,null,r.a.createElement(G.b,{className:"nav-link",to:"/play"},r.a.createElement("span",{className:"fa fa-gamepad fa-lg"})," Play")))))}}]),a}(n.Component);var V=function(e){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",null,"Developed by Rachel Lu"))))},z=a(13),H=a(56),W="https://jservice.io/",$=function(e){return function(t){return fetch(W+"api/clues?category="+e).then((function(e){if(e.ok)return e;var t=new Error("Fetching categories question error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(a){return t(ee(e,a))})).catch((function(e){return t(K(e.message))}))}},Y=function(e){return{type:"QAS_LOADING",payload:e}},K=function(e){return{type:"QAS_FAILED",payload:e}},U=function(e,t){return{type:"QAS_ADD",payload:Object(g.a)(Object(g.a)({},e),{},{qas:t})}},X=function(e){return{type:"CAT_LOADING",payload:e}},Z=function(e){return{type:"CAT_ADD",payload:e}},ee=function(e,t){return{type:"CAT_QAS_ADD",catId:e,payload:t}},te=a(198),ae=a(197),ne=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchQAs(0),this.props.fetchCats()}},{key:"render",value:function(){var e=this;return console.log("main render: ",this.props.location),r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(te.a,null,r.a.createElement(ae.a,{key:this.props.location.key,classNames:"page",timeout:300},r.a.createElement(z.d,{location:this.props.location},r.a.createElement(z.b,{exact:!0,path:"/search",render:function(){return r.a.createElement(L,{appProps:e.props})}}),r.a.createElement(z.b,{exact:!0,path:"/play",render:function(){return r.a.createElement(x,{appProps:e.props})}}),r.a.createElement(z.a,{to:"/search"})))),r.a.createElement(V,null))}}]),a}(n.Component),re=Object(z.g)(Object(H.b)((function(e){return{qas:e.qas,cats:e.cats,catQAs:e.catQAs}}),(function(e){return{fetchQAs:function(t){return e(function(e){return function(t){t(Y(!0));var a=W+"api/clues?offset="+(e&&e.offset||0)+(e.catId?"&category="+e.catId:"")+(e.value?"&value="+e.value:"")+(e.startDate&&e.endDate?"&min_date="+T(e.startDate)+"&max_date="+T(e.endDate):(e.startDate?"&max_date="+T(e.startDate):"")+(e.endDate?"&min_date="+T(e.endDate):""));return console.log("fetchQAs: ",a,e),fetch(a).then((function(e){if(e.ok)return e;var t=new Error("Fetching questions error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return""!==e.question&&e.value}))})).then((function(a){return t(U(e,a))})).catch((function(e){return t(K(e.message))}))}}(t))},fetchCats:function(){return e((function(e){e(X(!0));var a=1e3*Math.random();return fetch(W+"api/categories?offset="+a+"&count="+(t||100)).then((function(e){if(e.ok)return e;var t=new Error("Fetching categories error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){var a=t.sort((function(e,t){return e.clues_count<t.clues_count?1:-1})).slice(0,6);return a.map((function(t){return e($(t.id))})),e(Z(a))})).catch((function(t){return e(K(t.message))}))}));var t}}}))(ne)),ce=(a(178),a(39)),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QAS_LOADING":return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.payload,errMess:null});case"QAS_FAILED":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,errMess:t.payload});case"QAS_ADD":var a=t.payload.offset>0&&e.data?e.data:[],n=t.payload.qas.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{airdate:new Date(e.airdate)})}));return t.payload.qas=null,Object(g.a)(Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,errMess:null},t.payload),{},{data:a.concat(n)});default:return e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,cats:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAT_LOADING":return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.payload,errMess:null});case"CAT_FAILED":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,errMess:t.payload});case"CAT_ADD":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,errMess:null,cats:t.payload});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,catQAs:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAT_QAS_LOADING":return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.payload,errMess:null});case"CAT_QAS_FAILED":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,errMess:t.payload});case"CAT_QAS_ADD":var a=e.catQAs;return a["c"+t.catId]=t.payload.filter((function(e){return e.value>0})).sort((function(e,t){return e.value>t.value?1:-1})).map((function(e){return Object(g.a)(Object(g.a)({},e),{},{airdate:new Date(e.airdate)})})),Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,errMess:null,catQAs:a});default:return e}},ie=a(97),ue=a(98),de=a.n(ue),pe=Object(ce.d)(Object(ce.c)({qas:se,cats:le,catQAs:oe}),Object(ce.a)(ie.a,de.a)),me=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(H.a,{store:pe},r.a.createElement(G.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(re,null))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[100,1,2]]]);
//# sourceMappingURL=main.78fa5028.chunk.js.map